<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Financiera de Proyectos</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    
    <link rel="stylesheet" href="css/style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="js/financial.js" defer></script>
    <script src="js/app.js" defer></script>
</head>
<body>
    <main class="container">
        <header>
            <h1>游늵 Calculadora de Evaluaci칩n de Proyectos</h1>
            <p>Una herramienta web interactiva para el an치lisis de inversiones, basada en la l칩gica de su archivo Excel.</p>
        </header>

        <article>
            <header>
                <h2>Proyectos Mutuamente Excluyentes (P치g. 325)</h2>
                <p>An치lisis de proyectos con diferente tama침o de inversi칩n inicial. Modifique los flujos de caja o el costo de capital para ver los resultados actualizados.</p>
            </header>
            
            <section id="p325-calculator">
                <table>
                    <thead>
                        <tr>
                            <th>Proyecto</th>
                            <th>A침o 0</th>
                            <th>A침o 1</th>
                            <th>A침o 2</th>
                            <th>A침o 3</th>
                            <th>VAN</th>
                            <th>TIR</th>
                            <th>TIRM</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>A</strong></td>
                            <td><input type="number" id="p325-a-y0" value="-100"></td>
                            <td><input type="number" id="p325-a-y1" value="400"></td>
                            <td><input type="number" id="p325-a-y2" value="0"></td>
                            <td><input type="number" id="p325-a-y3" value="0"></td>
                            <td id="p325-a-van" class="result"></td>
                            <td id="p325-a-tir" class="result"></td>
                            <td id="p325-a-tirm" class="result"></td>
                        </tr>
                        <tr>
                            <td><strong>B</strong></td>
                            <td><input type="number" id="p325-b-y0" value="-200"></td>
                            <td><input type="number" id="p325-b-y1" value="700"></td>
                            <td><input type="number" id="p325-b-y2" value="0"></td>
                            <td><input type="number" id="p325-b-y3" value="0"></td>
                            <td id="p325-b-van" class="result"></td>
                            <td id="p325-b-tir" class="result"></td>
                            <td id="p325-b-tirm" class="result"></td>
                        </tr>
                        <tr>
                            <td><strong>B - A (Incremental)</strong></td>
                            <td id="p325-ba-y0" class="result-static"></td>
                            <td id="p325-ba-y1" class="result-static"></td>
                            <td id="p325-ba-y2" class="result-static"></td>
                            <td id="p325-ba-y3" class="result-static"></td>
                            <td id="p325-ba-van" class="result"></td>
                            <td id="p325-ba-tir" class="result"></td>
                            <td id="p325-ba-tirm" class="result"></td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <div class="chart-container">
                <canvas id="p325-van-chart"></canvas>
            </div>
        </article>
        
        <article>
            <header>
                <h2>Proyectos con Diferente Desarrollo Temporal (P치g. 327)</h2>
                <p>Comparaci칩n de proyectos donde uno genera ingresos altos al principio (A) y otro al final (B). El punto donde sus perfiles de VAN se cruzan es la Tasa de Fisher.</p>
            </header>
            
            <section id="p327-calculator">
                <table>
                    <thead>
                        <tr>
                            <th>Proyecto</th>
                            <th>A침o 0</th>
                            <th>A침o 1</th>
                            <th>A침o 2</th>
                            <th>A침o 3</th>
                            <th>VAN</th>
                            <th>TIR</th>
                            <th>TIRM</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>A</strong></td>
                            <td><input type="number" id="p327-a-y0" value="-1000"></td>
                            <td><input type="number" id="p327-a-y1" value="800"></td>
                            <td><input type="number" id="p327-a-y2" value="500"></td>
                            <td><input type="number" id="p327-a-y3" value="100"></td>
                            <td id="p327-a-van" class="result"></td>
                            <td id="p327-a-tir" class="result"></td>
                            <td id="p327-a-tirm" class="result"></td>
                        </tr>
                        <tr>
                            <td><strong>B</strong></td>
                            <td><input type="number" id="p327-b-y0" value="-1000"></td>
                            <td><input type="number" id="p327-b-y1" value="100"></td>
                            <td><input type="number" id="p327-b-y2" value="500"></td>
                            <td><input type="number" id="p327-b-y3" value="1000"></td>
                            <td id="p327-b-van" class="result"></td>
                            <td id="p327-b-tir" class="result"></td>
                            <td id="p327-b-tirm" class="result"></td>
                        </tr>
                        <tr>
                            <td><strong>B - A (Incremental)</strong></td>
                            <td id="p327-ba-y0" class="result-static"></td>
                            <td id="p327-ba-y1" class="result-static"></td>
                            <td id="p327-ba-y2" class="result-static"></td>
                            <td id="p327-ba-y3" class="result-static"></td>
                            <td id="p327-ba-van" class="result"></td>
                            <td id="p327-ba-tir" class="result"></td>
                            <td id="p327-ba-tirm" class="result"></td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <div class="chart-container">
                <canvas id="p327-van-chart"></canvas>
            </div>
            
            <footer>
                <h4 class="table-title">An치lisis de Sensibilidad del VAN</h4>
                <table id="p327-sensitivity-table">
                    <thead>
                        <tr>
                            <th>k</th>
                            <th>VAN Proyecto A</th>
                            <th>VAN Proyecto B</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </footer>
        </article>

        <article>
            <header>
                <h2>Proyectos con TIR M칰ltiples o Indeterminada (P치g. 330)</h2>
                <p>Los flujos de caja no convencionales (m칰ltiples cambios de signo) pueden generar m치s de una TIR. Utilice el campo "Estimaci칩n" para encontrar las diferentes tasas.</p>
            </header>
            <section id="p330-calculator">
                <div class="grid">
                    <div>
                        <label for="p330-costo-capital">Costo de Capital (k)</label>
                        <input type="number" id="p330-costo-capital" value="0.1" step="0.01">
                    </div>
                    <div>
                        <label for="p330-tir-guess">Estimaci칩n para TIR</label>
                        <input type="number" id="p330-tir-guess" value="0.1" step="0.05">
                    </div>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Proyecto</th>
                            <th>A침o 0</th>
                            <th>A침o 1</th>
                            <th>A침o 2</th>
                            <th>VAN</th>
                            <th>TIR (con estimaci칩n)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>E</strong></td>
                            <td><input type="number" id="p330-e-y0" value="-5000"></td>
                            <td><input type="number" id="p330-e-y1" value="30000"></td>
                            <td><input type="number" id="p330-e-y2" value="-30000"></td>
                            <td id="p330-e-van" class="result"></td>
                            <td id="p330-e-tir" class="result"></td>
                        </tr>
                        <tr>
                            <td><strong>F</strong></td>
                            <td><input type="number" id="p330-f-y0" value="-7000"></td>
                            <td><input type="number" id="p330-f-y1" value="17000"></td>
                            <td><input type="number" id="p330-f-y2" value="-10000"></td>
                            <td id="p330-f-van" class="result"></td>
                            <td id="p330-f-tir" class="result"></td>
                        </tr>
                        <tr>
                            <td><strong>G</strong></td>
                            <td><input type="number" id="p330-g-y0" value="-2000"></td>
                            <td><input type="number" id="p330-g-y1" value="5000"></td>
                            <td><input type="number" id="p330-g-y2" value="-5000"></td>
                            <td id="p330-g-van" class="result"></td>
                            <td id="p330-g-tir" class="result"></td>
                        </tr>
                    </tbody>
                </table>
                 <div class="chart-container">
                    <canvas id="p330-van-chart"></canvas>
                </div>
            </section>
        </article>

        <article>
            <header>
                <h2>Cadena de Reemplazos y Anualidad Equivalente (P치g. 336)</h2>
                <p>Comparaci칩n de proyectos con vidas 칰tiles diferentes (A: 4 a침os, B: 2 a침os) mediante el m칠todo de cadena de reemplazos y la Anualidad Equivalente (AE).</p>
            </header>
            <section id="p336-calculator">
                 <label for="p336-costo-capital">Costo de Capital (k)</label>
                 <input type="number" id="p336-costo-capital" value="0.1" step="0.01" style="max-width: 200px; margin-bottom: 1rem;">
                
                <h4 class="table-title">An치lisis de Proyectos Individuales</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Proyecto</th>
                            <th>A침o 0</th>
                            <th>A침o 1</th>
                            <th>A침o 2</th>
                            <th>A침o 3</th>
                            <th>A침o 4</th>
                            <th>VAN</th>
                            <th>TIR</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>A (4 a침os)</strong></td>
                            <td><input type="number" id="p336-a-y0" value="-40000"></td>
                            <td><input type="number" id="p336-a-y1" value="8000"></td>
                            <td><input type="number" id="p336-a-y2" value="14000"></td>
                            <td><input type="number" id="p336-a-y3" value="15000"></td>
                            <td><input type="number" id="p336-a-y4" value="17000"></td>
                            <td id="p336-a-van" class="result"></td>
                            <td id="p336-a-tir" class="result"></td>
                        </tr>
                        <tr>
                            <td><strong>B (2 a침os)</strong></td>
                            <td><input type="number" id="p336-b-y0" value="-20000"></td>
                            <td><input type="number" id="p336-b-y1" value="10000"></td>
                            <td><input type="number" id="p336-b-y2" value="15000"></td>
                            <td class="result-static">-</td>
                            <td class="result-static">-</td>
                            <td id="p336-b-van" class="result"></td>
                            <td id="p336-b-tir" class="result"></td>
                        </tr>
                    </tbody>
                </table>
                
                <h4 class="table-title">An치lisis con Vidas Comunes (4 a침os)</h4>
                <table>
                     <thead>
                        <tr>
                            <th>Proyecto</th>
                            <th>A침o 0</th>
                            <th>A침o 1</th>
                            <th>A침o 2</th>
                            <th>A침o 3</th>
                            <th>A침o 4</th>
                            <th>VAN</th>
                            <th>TIR</th>
                        </tr>
                    </thead>
                    <tbody>
                         <tr>
                            <td><strong>B con Reemplazo</strong></td>
                            <td id="p336-brep-y0" class="result-static"></td>
                            <td id="p336-brep-y1" class="result-static"></td>
                            <td id="p336-brep-y2" class="result-static"></td>
                            <td id="p336-brep-y3" class="result-static"></td>
                            <td id="p336-brep-y4" class="result-static"></td>
                            <td id="p336-brep-van" class="result"></td>
                            <td id="p336-brep-tir" class="result"></td>
                        </tr>
                    </tbody>
                </table>

                <h4 class="table-title">Criterios de Decisi칩n</h4>
                <table>
                     <thead>
                        <tr>
                            <th>Criterio</th>
                            <th>Proyecto A</th>
                            <th>Proyecto B</th>
                            <th>Decisi칩n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Anualidad Equivalente (AE)</strong></td>
                            <td id="p336-a-ae" class="result"></td>
                            <td id="p336-b-ae" class="result"></td>
                            <td id="p336-ae-decision" class="result-static"></td>
                        </tr>
                        <tr>
                            <td><strong>VAN con Vidas Comunes</strong></td>
                             <td id="p336-a-van-rep" class="result-static"></td>
                             <td id="p336-brep-van-rep" class="result-static"></td>
                             <td id="p336-van-decision" class="result-static"></td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </article>

        <article>
            <header>
                <h2>C치lculo de Tarifa con "Solver" (P치g. 343)</h2>
                <p>Este es un problema de b칰squeda de objetivo. La herramienta encontrar치 la tarifa anual constante que se debe cobrar para que la TIR del proyecto para el concesionario sea exactamente igual a la TIR m치xima permitida.</p>
            </header>
            <section id="p343-solver">
                <div class="grid">
                    <div>
                        <label>Inversi칩n Inicial</label>
                        <input type="number" id="p343-inversion" value="-684512">
                    </div>
                    <div>
                        <label>Costo Operaci칩n Anual</label>
                        <input type="number" id="p343-costo-op" value="88979">
                    </div>
                    <div>
                        <label>A침os de Concesi칩n</label>
                        <input type="number" id="p343-anios" value="5" step="1">
                    </div>
                </div>
                <div class="grid">
                    <div>
                        <label>Tasa Impuesto Ganancias</label>
                        <input type="number" id="p343-impuesto" value="0.30" step="0.01">
                    </div>
                    <div>
                        <label>TIR Objetivo</label>
                        <input type="number" id="p343-tir-objetivo" value="0.127" step="0.001">
                    </div>
                </div>

                <button id="p343-calcular-btn">Calcular Tarifa 칍ptima</button>
                
                <h4 class="table-title">Resultado</h4>
                <p>La tarifa (ingreso anual) que se necesita para alcanzar la TIR objetivo es: <strong id="p343-resultado-tarifa" class="result" style="padding: 0.5rem; border-radius: var(--pico-border-radius);">...</strong></p>

                <h4 class="table-title">Flujo de Caja del Proyecto (con tarifa calculada)</h4>
                <div class="table-responsive">
                    <table id="p343-fcf-table">
                        <thead>
                            <tr>
                                <th>Concepto</th>
                                </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
                <p><strong>TIR del Flujo Verificada:</strong> <strong id="p343-tir-verificada" class="result" style="padding: 0.5rem; border-radius: var(--pico-border-radius);">...</strong></p>

            </section>
        </article>

        <article>
             <header>
                <h2>Ejercicios Adicionales</h2>
                <p>Secciones para los casos de an치lisis m치s complejos presentados en el material.</p>
            </header>
            
            <details>
                <summary><strong>Proyecto con 3 TIR y Tasa de Rentabilidad Compuesta (TRC)</strong></summary>
                <section id="ej-adic-3tir" style="margin-top: 1rem;">
                    <p>An치lisis de un proyecto con flujos no convencionales que resulta en 3 TIRs. Se introducen tasas de financiamiento y reinversi칩n para calcular la TIRM y la TRC.</p>
                     <div class="grid">
                        <div>
                            <label>Costo de Capital (k)</label>
                            <input type="number" id="ej-adic-3tir-k" value="0.1" step="0.01">
                        </div>
                        <div>
                            <label>Tasa de Financiamiento</label>
                            <input type="number" id="ej-adic-3tir-fin" value="0.12" step="0.01">
                        </div>
                        <div>
                            <label>Tasa Libre de Riesgo (Reinversi칩n)</label>
                            <input type="number" id="ej-adic-3tir-re" value="0.05" step="0.01">
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>A침o</th>
                                <th>0</th>
                                <th>1</th>
                                <th>2</th>
                                <th>3</th>
                                <th>4</th>
                                <th>5</th>
                                <th>6</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Flujo</strong></td>
                                <td><input type="number" id="ej-adic-3tir-y0" value="-7000"></td>
                                <td><input type="number" id="ej-adic-3tir-y1" value="15000"></td>
                                <td><input type="number" id="ej-adic-3tir-y2" value="8000"></td>
                                <td><input type="number" id="ej-adic-3tir-y3" value="-20000"></td>
                                <td><input type="number" id="ej-adic-3tir-y4" value="-15000"></td>
                                <td><input type="number" id="ej-adic-3tir-y5" value="15000"></td>
                                <td><input type="number" id="ej-adic-3tir-y6" value="5000"></td>
                            </tr>
                        </tbody>
                    </table>
                     <table>
                        <thead>
                            <tr>
                                <th>VAN</th>
                                <th>TIRM</th>
                                <th>TIR 1 (Est: 0.1)</th>
                                <th>TIR 2 (Est: 0.4)</th>
                                <th>TIR 3 (Est: 0.6)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td id="ej-adic-3tir-van" class="result"></td>
                                <td id="ej-adic-3tir-tirm" class="result"></td>
                                <td id="ej-adic-3tir-tir1" class="result"></td>
                                <td id="ej-adic-3tir-tir2" class="result"></td>
                                <td id="ej-adic-3tir-tir3" class="result"></td>
                            </tr>
                        </tbody>
                     </table>
                     <div class="chart-container">
                        <canvas id="ej-adic-3tir-chart"></canvas>
                    </div>
                </section>
            </details>
            
            <details>
                <summary><strong>Proyectos con Dos Tasas de Fisher</strong></summary>
                <section id="ej-adic-fisher" style="margin-top: 1rem;">
                    <p>Caso en el que el flujo de caja incremental entre dos proyectos es no convencional, generando dos puntos de cruce en los perfiles de VAN (dos tasas de Fisher).</p>
                    <label>Costo de Capital (k)</label>
                    <input type="number" id="ej-adic-fisher-k" value="0.1" step="0.01" style="max-width: 200px; margin-bottom: 1rem;">
                    <table>
                         <thead>
                            <tr>
                                <th>Proyecto</th>
                                <th>A침o 0</th>
                                <th>A침o 1</th>
                                <th>A침o 2</th>
                                <th>VAN</th>
                                <th>TIR</th>
                                <th>TIRM</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>A</strong></td>
                                <td><input type="number" id="ej-adic-fisher-a-y0" value="-350000"></td>
                                <td><input type="number" id="ej-adic-fisher-a-y1" value="550000"></td>
                                <td><input type="number" id="ej-adic-fisher-a-y2" value="60000"></td>
                                <td id="ej-adic-fisher-a-van" class="result"></td>
                                <td id="ej-adic-fisher-a-tir" class="result"></td>
                                <td id="ej-adic-fisher-a-tirm" class="result"></td>
                            </tr>
                             <tr>
                                <td><strong>B</strong></td>
                                <td><input type="number" id="ej-adic-fisher-b-y0" value="-130000"></td>
                                <td><input type="number" id="ej-adic-fisher-b-y1" value="20000"></td>
                                <td><input type="number" id="ej-adic-fisher-b-y2" value="375000"></td>
                                <td id="ej-adic-fisher-b-van" class="result"></td>
                                <td id="ej-adic-fisher-b-tir" class="result"></td>
                                <td id="ej-adic-fisher-b-tirm" class="result"></td>
                            </tr>
                             <tr>
                                <td><strong>B - A (Incremental)</strong></td>
                                <td id="ej-adic-fisher-ba-y0" class="result-static"></td>
                                <td id="ej-adic-fisher-ba-y1" class="result-static"></td>
                                <td id="ej-adic-fisher-ba-y2" class="result-static"></td>
                                <td id="ej-adic-fisher-ba-van" class="result"></td>
                                <td colspan="2" id="ej-adic-fisher-ba-tir" class="result"></td> </tr>
                        </tbody>
                    </table>
                     <div class="chart-container">
                        <canvas id="ej-adic-fisher-chart"></canvas>
                    </div>
                </section>
            </details>

        </article>

        <div class="global-controls">
            <label for="global-costo-capital">
                Costo de Capital Global (k)
                <input type="number" id="global-costo-capital" value="0.1" step="0.01" title="Cambia el costo de capital para todas las calculadoras que no tengan uno espec칤fico.">
            </label>
            <label>
                Tema
                <select id="theme-switcher">
                    <option value="light">Claro</option>
                    <option value="dark">Oscuro</option>
                </select>
            </label>
        </div>

    </main>
</body>
</html>
